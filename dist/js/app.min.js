(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".category__btn"),t=document.querySelector(".modal"),o=t.querySelector(".modal__btn"),a=t.querySelector(".modal-name"),n=t.querySelector(".modal-number"),c=document.querySelector('input[type="range"]'),s=(e,t,o)=>{const a=document.createElement("div");a.classList.add("category__item","item-category"),a.innerHTML=`\n      <p class="item-category__name">${t}</p>\n      <input class='item-category__input item-input' type="number" value="${o}" />\n    `,e.append(a)},r=()=>{const e=document.querySelectorAll(".category__item");c.addEventListener("input",(()=>{localStorage.setItem("range",c.value)})),e.forEach((e=>{const t=e.closest(".category"),o=e.querySelector(".item-category__name"),a=e.querySelector(".item-category__input"),n=t.className.split(" ")[1];localStorage.setItem(`${n} ${o.textContent}`,`${o.textContent} ${a.value}`)}))},l=()=>{o.classList.add("ban"),a.value=a.value.replace(/[0-9]/g,""),a.value.length>0&&n.value.length>0?o.classList.remove("ban"):o.classList.add("ban")},i=()=>{const e=document.querySelectorAll(".item-input"),t=document.querySelector(".saving__precent span"),o=document.querySelector(".remainder"),a=document.querySelector(".save"),n=document.querySelector(".month"),s=document.querySelector(".year");let r=0,l=0;e.forEach((e=>{e.closest(".income")?r+=+e.value:l+=+e.value})),o.textContent=r-l,t.textContent=c.value,a.textContent=parseInt(+o.textContent/100*c.value),n.textContent=parseInt(o.textContent-a.textContent),s.textContent=parseInt(12*+a.textContent)};l(),i(),r(),(()=>{const e=document.querySelectorAll(".category__items");c.value=localStorage.getItem("range");for(const t in localStorage){const o=(o,a)=>t.split(" ")[0]===o?s(e[a],localStorage[t].split(" ")[0],localStorage[t].split(" ")[1]):null;o("income",0),o("expenses",1)}})(),setTimeout((()=>t.click()),130),document.addEventListener("click",(c=>{if(c.target.classList.contains("category__btn")){const a=c.target;e.forEach((e=>e.classList.remove("this"))),a.classList.add("this"),t.classList.add("show-modal"),o.classList.add("ban")}if(c.target===o&&e.forEach((e=>{if(e.classList.contains("this")){const o=e.closest(".category").querySelector(".category__items");s(o,a.value,n.value),t.classList.remove("show-modal"),a.value="",n.value=""}})),c.target===t&&t.classList.remove("show-modal"),c.target.classList.contains("item-category__name")){const e=c.target.closest(".income"),t=c.target.closest(".category");c.target.parentNode.classList.add("del");const o=(e,t)=>{for(const o in localStorage)o.split(" ")[1]==c.target.textContent&&e&&localStorage.removeItem(`${t} ${c.target.textContent}`)};setTimeout((()=>{c.target.parentNode.remove(),i(),o(e,"income"),o(t,"expenses")}),350)}i(),r()})),document.addEventListener("input",(()=>{l(),i(),r()}))}))})();